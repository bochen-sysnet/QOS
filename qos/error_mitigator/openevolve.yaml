max_iterations: 200
checkpoint_interval: 10
log_level: "INFO"
log_dir: null
random_seed: 42

diff_based_evolution: false
max_code_length: 30000

early_stopping_patience: null
convergence_threshold: 0.001
early_stopping_metric: "combined_score"

llm:
  api_base: "http://localhost:8000/v1"
  primary_model: "Qwen/Qwen2.5-Coder-14B-Instruct-AWQ"
  temperature: 0.8
  top_p: 0.92
  max_tokens: 1200
  timeout: 450
  retries: 2
  retry_delay: 1

prompt:
  system_message: |
    You are an expert Quantum System Optimizer specializing in error mitigation.
    Your task is to optimize the function evolved_run(self, q) to reduce the depth, CNOT count, and quantum overhead of the circuit.
    
    You can use the following techniques to optimize the circuit:
    - Gate virtualisation (applyGV)
    - Wire cutting (applyWC)
    - Frozen qubit (FrozenQubitsPass)
    - Qubit reuse (applyQR)

    Optimization opportunities:
    - Improve the cost search algorithm (fewer iterations of computeCuttingCosts)
    - Improve the ordering of the above techniques
    - Improve the condition for applying the above techniques

    OUTPUT FORMAT (MANDATORY):
    - Output the COMPLETE updated program code.
    - Do NOT output markdown fences, diff markers, or commentary.
    - IMPORTANT: All text outside '# OE_BEGIN' and '# OE_END' MUST be identical to the original file (character-for-character).
    - Keep '# OE_BEGIN' and '# OE_END' present and unchanged.
    - Do not change the imports or any function signatures.
    - Do not change the constraint of the max_iters in the cost search algorithm.

    OBJECTIVE:
    - Reduce depth, CNOT count, and quantum overhead; keep deterministic and fast.
    - Prefer novel algorithmic ideas (new heuristics, pruning rules) over micro-refactors.

  evaluator_system_message: "You are an expert code reviewer."
  num_top_programs: 2
  num_diverse_programs: 1
  use_template_stochasticity: false
  include_artifacts: true
  max_artifact_bytes: 20480
  artifact_security_filter: true
  template_variations: 
    greeting:
        - "Let's enhance this code:"
        - "Time to optimize:"
        - "Improving the algorithm:"
    improvement_suggestion:
        - "Here's how we could improve this code:"
        - "I suggest the following improvements:"
        - "We can enhance this code by:"

database:
  db_path: openevolve_output/db
  in_memory: false
  log_prompts: true

  # More islands, smaller per-island pop -> diverse search without too many total candidates
  population_size: 24
  archive_size: 24
  num_islands: 4

  # Less frequent mixing to preserve island diversity
  migration_interval: 30
  migration_rate: 0.15

  # Reduce selection pressure, increase exploration
  elite_selection_ratio: 0.05
  exploration_ratio: 0.6
  exploitation_ratio: 0.35

  feature_dimensions:
    - "complexity"
    - "diversity"
  feature_bins: 12
  diversity_reference_size: 30

evaluator:
  timeout: 90
  max_retries: 1
  cascade_evaluation: false
  parallel_evaluations: 1
  use_llm_feedback: false
  llm_feedback_weight: 0.0

evolution_trace:
  enabled: false
  format: "jsonl"
  include_code: false
  include_prompts: false
  output_path: openevolve_output/evolution_trace.jsonl
  buffer_size: 10
  compress: false
